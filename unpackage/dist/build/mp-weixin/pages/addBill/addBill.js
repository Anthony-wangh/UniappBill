"use strict";const t=require("../../common/vendor.js"),e={data:()=>({bill:{date:(new Date).toISOString().slice(0,10),amount:"",type:"",category:"",remark:""},types:["支出","收入"],categories:{"支出":["购物","餐饮","交通","娱乐","房屋"],"收入":["工资","奖金"]},selectCategories:[]}),methods:{onDateChange(t){this.bill.date=t.detail.value},validateAmount(t){const e=t.detail.value;/^\d*\.?\d*$/.test(e)||(this.bill.amount=e.replace(/[^0-9.]/g,""))},onTypeChange(t){const e=t.detail.value;this.bill.type=this.types[e],this.bill.category=this.categories[this.bill.type][0],this.selectCategories=this.categories[this.bill.type]},onCategoryChange(t){const e=this.categories[this.bill.type],i=t.detail.value;this.bill.category=e[i]},submitBill(){if(!this.bill.amount||!this.bill.type||!this.bill.category)return void t.index.showToast({title:"请填写完整信息",icon:"none"});let e=t.index.getStorageSync("bills")||[];e.push({time:new Date(this.bill.date).getTime(),amount:parseFloat(this.bill.amount),type:this.bill.type,category:this.bill.category,remark:this.bill.remark}),t.index.setStorageSync("bills",e),this.bill={date:(new Date).toISOString().slice(0,10),amount:"",type:"",category:"",remark:""},t.index.showToast({title:"账单添加成功",icon:"success"}),this.$emit("navigateTo","bills")}}};const i=t._export_sfc(e,[["render",function(e,i,l,a,o,s){return{a:t.t(o.bill.date||"请选择日期"),b:o.bill.date,c:t.o(((...t)=>s.onDateChange&&s.onDateChange(...t))),d:t.o([t=>o.bill.amount=t.detail.value,(...t)=>s.validateAmount&&s.validateAmount(...t)]),e:o.bill.amount,f:t.t(o.bill.type||"请选择类型"),g:o.types,h:t.o(((...t)=>s.onTypeChange&&s.onTypeChange(...t))),i:t.t(o.bill.category||"请选择类目"),j:o.selectCategories,k:t.o(((...t)=>s.onCategoryChange&&s.onCategoryChange(...t))),l:o.bill.remark,m:t.o((t=>o.bill.remark=t.detail.value)),n:t.o(((...t)=>s.submitBill&&s.submitBill(...t)))}}]]);wx.createPage(i);
