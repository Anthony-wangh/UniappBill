"use strict";const e=require("../../common/vendor.js"),t={data:()=>({bill:{date:(new Date).toISOString().slice(0,10),amount:"",type:"",category:"",remark:""},types:["支出","收入"],categories:{"支出":["购物","餐饮","交通","娱乐","健康","礼物","电子","居住"],"收入":["工资","理财"]},selectCategories:[]}),methods:{onDateChange(e){this.bill.date=e.detail.value},validateAmount(e){let t=e.detail.value;t=t.replace(/[^0-9.]/g,"").replace(/^0+(\d)/,"$1").replace(/\.{2,}/g,".").replace(/^(\d+)\.(\d{2})\d*$/,"$1.$2"),this.bill.amount=t},onTypeChange(e){const t=e.detail.value;this.bill.type=this.types[t],this.bill.category=this.categories[this.bill.type][0],this.selectCategories=this.categories[this.bill.type]},onCategoryChange(e){const t=this.categories[this.bill.type],i=e.detail.value;this.bill.category=t[i]},submitBill(){if(!this.bill.amount||!this.bill.type||!this.bill.category)return void e.index.showToast({title:"请填写完整信息",icon:"none"});let t=e.index.getStorageSync("bills")||[];t.push({time:new Date(this.bill.date).getTime(),amount:parseFloat(this.bill.amount),type:this.bill.type,category:this.bill.category,remark:this.bill.remark}),e.index.setStorageSync("bills",t),this.bill={date:(new Date).toISOString().slice(0,10),amount:"",type:"",category:"",remark:""},e.index.showToast({title:"账单添加成功",icon:"success"}),e.index.navigateBack()}}};const i=e._export_sfc(t,[["render",function(t,i,l,a,o,s){return{a:e.t(o.bill.date||"请选择日期"),b:o.bill.date,c:e.o(((...e)=>s.onDateChange&&s.onDateChange(...e))),d:e.o([e=>o.bill.amount=e.detail.value,(...e)=>s.validateAmount&&s.validateAmount(...e)]),e:o.bill.amount,f:e.t(o.bill.type||"请选择类型"),g:o.types,h:e.o(((...e)=>s.onTypeChange&&s.onTypeChange(...e))),i:e.t(o.bill.category||"请选择类目"),j:o.selectCategories,k:e.o(((...e)=>s.onCategoryChange&&s.onCategoryChange(...e))),l:o.bill.remark,m:e.o((e=>o.bill.remark=e.detail.value)),n:e.o(((...e)=>s.submitBill&&s.submitBill(...e)))}}]]);wx.createPage(i);
