{"version":3,"file":"statistics.js","sources":["pages/statistics/statistics.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc3RhdGlzdGljcy9zdGF0aXN0aWNzLnZ1ZQ"],"sourcesContent":["<template>\t\t\r\n\t<view class=\"statistics-container\">\r\n\t\t<!-- 月份切换 -->\r\n\t\t<view class=\"month-picker\">\r\n\t\t  <view class=\"arrow\" @click=\"changeMonth(-1)\">◀</view>\r\n\t\t  <text class=\"current-month\">{{ currentMonth }}</text>\r\n\t\t  <view class=\"arrow\" @click=\"changeMonth(1)\">▶</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<PieChart\r\n\t\t\tref=\"pieChart\"\r\n\t\t\t:chartData=\"chartData\"\r\n\t\t> \r\n\t\t</PieChart>\r\n\t</view>\r\n\t\r\n\t\r\n</template>\r\n\r\n<script>\r\n\timport PieChart from '@/components/Chart/PieChart.vue';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tPieChart,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tchartData: {\r\n\t\t\t\t  series: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdata : [\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{ name: '一班', value: 256 },\r\n\t\t\t\t\t\t\t\t\t{ name: '二班', value: 123 },\r\n\t\t\t\t\t\t\t\t\t{ name: '三班', value: 20 },\r\n\t\t\t\t\t\t\t\t\t{ name: '四班', value: 0 },\r\n\t\t\t\t\t\t\t\t\t{ name: '五班', value: 0 },\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t    \r\n\t\t\t\t  ]\r\n\t\t\t\t}, // 用来存储账单数据\r\n\t\t\t\tbills:[],\r\n\t\t\t\tcategories: [{\r\n\t\t\t\t\t\tname: '购物',\r\n\t\t\t\t\t\tcolor: '#ff6b6b',\r\n\t\t\t\t\t\ttype: 'expense'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '餐饮',\r\n\t\t\t\t\t\tcolor: '#48dbfb',\r\n\t\t\t\t\t\ttype: 'expense'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '交通',\r\n\t\t\t\t\t\tcolor: '#f368e0',\r\n\t\t\t\t\t\ttype: 'expense'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ name: '房屋', color: '#eb3b5a', type: 'expense' },\r\n\t\t\t\t\t{ name: '工资', color: '#1dd1a1', type: 'income' },\r\n\t\t\t\t],\r\n\t\t\t\tcurrentDate: new Date(),\r\n\t\t\t};\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.loadBills();\r\n\t\t\tthis.$refs.pieChart.drawCharts(this.chartData);\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t  currentMonth() {\r\n\t\t    return this.currentDate.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long' });\r\n\t\t  }\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\tloadBills() {\n\t\t  const bills = uni.getStorageSync('bills') || [];\n\t\t  this.bills = bills;\n\t\t  this.filterBillsByMonth();\n\t\t},\n\t\tfilterBillsByMonth() {\n\t\t  const year = this.currentDate.getFullYear();\n\t\t  const month = this.currentDate.getMonth();\n\t\t  const filteredBills = this.bills.filter(bill => {\n\t\t\tconst billDate = new Date(bill.time);\n\t\t\treturn billDate.getFullYear() === year && billDate.getMonth() === month;\n\t\t  });\r\n\t\t  \r\n\t\t  const grouped = [];\r\n\t\t  this.categories.forEach(category => {\r\n\t\t\t  const sery = {};\r\n\t\t\t  sery.name=category.name;\r\n\t\t\t  const v=filteredBills\n\t\t\t\t.filter(item => item.category === category.name)\n\t\t\t\t.reduce((sum, item) => sum + Number(item.amount), 0)\n\t\t\t\t.toFixed(2);\r\n\t\t\t\tsery.value=Number(v);\r\n\t\t\t\tgrouped.push(sery);\n\t\t\t});\r\n\t\t  \r\n\t\t\tvar templateData={};\r\n\t\t\tconst seriesItem={};\r\n\t\t\tseriesItem.data=grouped;\r\n\t\t\ttemplateData.series=[seriesItem];\n\t\t\tthis.chartData=templateData;\n\t\t},\r\n\t\tchangeMonth(offset) {\n\t\t\t  const newDate = new Date(this.currentDate);\n\t\t\t  newDate.setMonth(newDate.getMonth() + offset);\n\t\t\t  this.currentDate = newDate;\n\t\t\t  this.filterBillsByMonth();\n\t\t},\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"scss\">\r\n\t\r\n\t/* 月份切换 */\r\n\t.month-picker {\r\n\t\twidth: 100%;\r\n\t    display: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #96C560;\r\n\t\tpadding: 5px 0;\r\n\t\r\n\t\t.arrow {\r\n\t    font-size: 18px;\r\n\t    color: #e8e8e8;\r\n\t    margin: 0 15px;\r\n\t\t}\r\n\t\r\n\t\t.current-month {\r\n\t    font-size: 16px;\r\n\t    font-weight: bold;\r\n\t    color: #ebebeb;\r\n\t  }\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/HBuilderProjects/BillRecord/pages/statistics/statistics.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAoBC,iBAAiB,MAAW;AAC5B,MAAK,YAAU;AAAA,EACd,YAAY;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,WAAW;AAAA,QACT,QAAQ;AAAA,UACP;AAAA,YACC,MAAO;AAAA,cAEN,EAAE,MAAM,MAAM,OAAO,IAAK;AAAA,cAC1B,EAAE,MAAM,MAAM,OAAO,IAAK;AAAA,cAC1B,EAAE,MAAM,MAAM,OAAO,GAAI;AAAA,cACzB,EAAE,MAAM,MAAM,OAAO,EAAG;AAAA,cACxB,EAAE,MAAM,MAAM,OAAO,EAAG;AAAA,YACzB;AAAA,UAGD;AAAA,QAGD;AAAA,MACD;AAAA;AAAA,MACD,OAAM,CAAE;AAAA,MACR,YAAY;AAAA,QAAC;AAAA,UACX,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACN;AAAA,QACD;AAAA,UACC,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACN;AAAA,QACD;AAAA,UACC,MAAM;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,QACN;AAAA,QACD,EAAE,MAAM,MAAM,OAAO,WAAW,MAAM,UAAW;AAAA,QACjD,EAAE,MAAM,MAAM,OAAO,WAAW,MAAM,SAAU;AAAA,MAChD;AAAA,MACD,aAAa,oBAAI,KAAM;AAAA;EAExB;AAAA,EACD,SAAS;AACR,SAAK,UAAS;AACd,SAAK,MAAM,SAAS,WAAW,KAAK,SAAS;AAAA,EAC7C;AAAA,EACD,UAAU;AAAA,IACR,eAAe;AACb,aAAO,KAAK,YAAY,mBAAmB,SAAS,EAAE,MAAM,WAAW,OAAO,OAAK,CAAG;AAAA,IACxF;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IAET,YAAY;AACV,YAAM,QAAQA,cAAG,MAAC,eAAe,OAAO,KAAK,CAAA;AAC7C,WAAK,QAAQ;AACb,WAAK,mBAAkB;AAAA,IACxB;AAAA,IACD,qBAAqB;AACnB,YAAM,OAAO,KAAK,YAAY,YAAW;AACzC,YAAM,QAAQ,KAAK,YAAY,SAAQ;AACvC,YAAM,gBAAgB,KAAK,MAAM,OAAO,UAAQ;AACjD,cAAM,WAAW,IAAI,KAAK,KAAK,IAAI;AACnC,eAAO,SAAS,kBAAkB,QAAQ,SAAS,SAAS,MAAM;AAAA,MACjE,CAAC;AAED,YAAM,UAAU,CAAA;AAChB,WAAK,WAAW,QAAQ,cAAY;AACnC,cAAM,OAAO,CAAA;AACb,aAAK,OAAK,SAAS;AACnB,cAAM,IAAE,cACR,OAAO,UAAQ,KAAK,aAAa,SAAS,IAAI,EAC9C,OAAO,CAAC,KAAK,SAAS,MAAM,OAAO,KAAK,MAAM,GAAG,CAAC,EAClD,QAAQ,CAAC;AACV,aAAK,QAAM,OAAO,CAAC;AACnB,gBAAQ,KAAK,IAAI;AAAA,MAClB,CAAC;AAED,UAAI,eAAa,CAAA;AACjB,YAAM,aAAW,CAAA;AACjB,iBAAW,OAAK;AAChB,mBAAa,SAAO,CAAC,UAAU;AAC/B,WAAK,YAAU;AAAA,IACf;AAAA,IACD,YAAY,QAAQ;AACjB,YAAM,UAAU,IAAI,KAAK,KAAK,WAAW;AACzC,cAAQ,SAAS,QAAQ,SAAS,IAAI,MAAM;AAC5C,WAAK,cAAc;AACnB,WAAK,mBAAkB;AAAA,IACzB;AAAA,EACD;;;;;;;;;;;;;;;;;;AClHF,GAAG,WAAW,eAAe;"}