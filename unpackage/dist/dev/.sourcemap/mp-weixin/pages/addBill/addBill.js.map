{"version":3,"file":"addBill.js","sources":["pages/addBill/addBill.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkQmlsbC9hZGRCaWxsLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"add-bill-container\">\n\t\t<!-- 时间选择 -->\n\t\t<view class=\"form-group\">\n\t\t\t<label for=\"date\">时间</label>\n\t\t\t<picker mode=\"date\" :value=\"bill.date\" @change=\"onDateChange\" class=\"picker\">\n\t\t\t\t<view class=\"picker-text\">{{ bill.date || '请选择日期' }}</view>\n\t\t\t</picker>\n\t\t</view>\n\n\t\t<!-- 金额输入 -->\n\t\t<view class=\"form-group\">\n\t\t\t<label for=\"amount\">金额</label>\n\t\t\t<input class=\"input-field\" type=\"digit\" v-model=\"bill.amount\" placeholder=\"请输入金额\" @input=\"validateAmount\" />\n\t\t</view>\n\n\t\t<!-- 账单类型选择 -->\n\t\t<view class=\"form-group\">\n\t\t\t<label for=\"type\">账单类型</label>\n\t\t\t<picker mode=\"selector\" :range=\"types\" @change=\"onTypeChange\" class=\"picker\">\n\t\t\t\t<view class=\"picker-text\">{{ bill.type || '请选择类型' }}</view>\n\t\t\t</picker>\n\t\t</view>\n\n\t\t<!-- 类目选择 -->\n\t\t<view class=\"form-group\">\n\t\t\t<label for=\"category\">类目</label>\n\t\t\t<picker mode=\"selector\" :range=\"selectCategories\" @change=\"onCategoryChange\" class=\"picker\">\n\t\t\t\t<view class=\"picker-text\">{{ bill.category || '请选择类目' }}</view>\n\t\t\t</picker>\n\t\t</view>\n\n\t\t<!-- 备注输入 -->\n\t\t<view class=\"form-group\">\n\t\t\t<label for=\"remark\">备注</label>\n\t\t\t<input class=\"input-field\" type=\"text\" v-model=\"bill.remark\" placeholder=\"请输入备注（非必填）\" />\n\t\t</view>\n\n\t\t<!-- 添加按钮 -->\n\t\t<button class=\"submit-btn\" @click=\"submitBill\">添加</button>\n\t</view>\n</template>\n\n\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbill: {\r\n\t\t\t\t\tdate: new Date().toISOString().slice(0, 10), // 默认当前日期\r\n\t\t\t\t\tamount: '',\r\n\t\t\t\t\ttype: '', // 支出或收入\r\n\t\t\t\t\tcategory: '', // 具体类目\r\n\t\t\t\t\tremark: ''\r\n\t\t\t\t},\r\n\t\t\t\ttypes: ['支出', '收入'],\r\n\r\n\t\t\t\tcategories: {\r\n\t\t\t\t\t支出: ['购物', '餐饮', '交通', '娱乐','健康','礼物','电子','居住'],\r\n\t\t\t\t\t收入: ['工资', '理财']\r\n\t\t\t\t},\r\n\t\t\t\tselectCategories: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonDateChange(e) {\r\n\t\t\t\tthis.bill.date = e.detail.value;\r\n\t\t\t},\r\n\t\t\tvalidateAmount(e) {\r\n\t\t\t\tlet value = e.detail.value;\r\n\t\t\t\t// 只允许输入数字和小数点，并确保只有一个小数点\r\n\t\t\t\tvalue = value.replace(/[^0-9.]/g, '') // 只保留数字和.\r\n\t\t\t\t\t.replace(/^0+(\\d)/, '$1') // 防止输入多个前导零\r\n\t\t\t\t\t.replace(/\\.{2,}/g, '.') // 禁止连续输入多个.\r\n\t\t\t\t\t.replace(/^(\\d+)\\.(\\d{2})\\d*$/, '$1.$2'); // 限制小数点后两位\r\n\t\t\t\tthis.bill.amount = value;\r\n\t\t\t},\r\n\t\t\tonTypeChange(e) {\r\n\t\t\t\tconst index = e.detail.value;\r\n\t\t\t\tthis.bill.type = this.types[index];\r\n\t\t\t\tthis.bill.category = this.categories[this.bill.type][0]; // 重置类目选择\r\n\t\t\t\tthis.selectCategories = this.categories[this.bill.type];\r\n\t\t\t},\r\n\t\t\tonCategoryChange(e) {\r\n\t\t\t\tconst selectedCategories = this.categories[this.bill.type];\r\n\t\t\t\tconst index = e.detail.value;\r\n\t\t\t\tthis.bill.category = selectedCategories[index];\r\n\t\t\t},\r\n\t\t\tsubmitBill() {\r\n\t\t\t\tif (!this.bill.amount || !this.bill.type || !this.bill.category) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请填写完整信息',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 获取本地存储中的账单数据\r\n\t\t\t\tlet bills = uni.getStorageSync('bills') || [];\r\n\r\n\t\t\t\t// 新增账单\r\n\t\t\t\tbills.push({\r\n\t\t\t\t\ttime: new Date(this.bill.date).getTime(),\r\n\t\t\t\t\tamount: parseFloat(this.bill.amount),\r\n\t\t\t\t\ttype: this.bill.type,\r\n\t\t\t\t\tcategory: this.bill.category,\r\n\t\t\t\t\tremark: this.bill.remark\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// 更新本地存储\r\n\t\t\t\tuni.setStorageSync('bills', bills);\r\n\r\n\t\t\t\t// 清空表单\r\n\t\t\t\tthis.bill = {\r\n\t\t\t\t\tdate: new Date().toISOString().slice(0, 10),\r\n\t\t\t\t\tamount: '',\r\n\t\t\t\t\ttype: '',\r\n\t\t\t\t\tcategory: '',\r\n\t\t\t\t\tremark: ''\r\n\t\t\t\t};\r\n\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '账单添加成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// 返回账单列表页面\r\n\t\t\t\t//this.$emit('navigateTo', 'bills');\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.add-bill-container {\r\n\t\twidth: 100%;\r\n\t\tpadding: 20px 30px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tbox-sizing: border-box;\r\n\t\r\n\t\t.form-group {\r\n\t\t\tmargin-bottom: 20px;\r\n\t\r\n\t\t\tlabel {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tfont-size: 15px;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\tmargin-bottom: 5px;\r\n\t\t\t}\r\n\t\r\n\t\t\t// 统一 input 和 picker 样式\r\n\t\t\t.input-field, .picker {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 45px;\r\n\t\t\t\tpadding: 0 15px;\r\n\t\t\t\tborder: 1px solid #e0e0e0;\r\n\t\t\t\tborder-radius: 8px;\r\n\t\t\t\tbackground-color: #ffffff;\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.picker{\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\r\n\t\t\t// 让 picker 里面的文本完全居中\r\n\t\t\t.picker-text {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\tline-height: 45px; // 确保与 input 一致\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\t.input-field {\r\n\t\t\t\tline-height: 45px;\r\n\t\t\t}\r\n\t\r\n\t\t\t// input 和 picker 的 placeholder 颜色统一\r\n\t\t\t.input-field::placeholder {\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t.submit-btn {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 15px;\r\n\t\t\tbackground-color: #7bc7cf;\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 16px;\r\n\t\t\ttext-align: center;\r\n\t\t\tborder: none;\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tcursor: pointer;\r\n\t\r\n\t\t\t&:active {\r\n\t\t\t\tbackground-color: #a7cbcf;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n</style>","import MiniProgramPage from 'E:/HBuilderProjects/BillRecord/pages/addBill/addBill.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA8CC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,MAAM;AAAA,QACL,OAAM,oBAAI,QAAO,YAAa,EAAC,MAAM,GAAG,EAAE;AAAA;AAAA,QAC1C,QAAQ;AAAA,QACR,MAAM;AAAA;AAAA,QACN,UAAU;AAAA;AAAA,QACV,QAAQ;AAAA,MACR;AAAA,MACD,OAAO,CAAC,MAAM,IAAI;AAAA,MAElB,YAAY;AAAA,QACX,IAAI,CAAC,MAAM,MAAM,MAAM,MAAK,MAAK,MAAK,MAAK,IAAI;AAAA,QAC/C,IAAI,CAAC,MAAM,IAAI;AAAA,MACf;AAAA,MACD,kBAAkB,CAAC;AAAA;EAEpB;AAAA,EACD,SAAS;AAAA,IACR,aAAa,GAAG;AACf,WAAK,KAAK,OAAO,EAAE,OAAO;AAAA,IAC1B;AAAA,IACD,eAAe,GAAG;AACjB,UAAI,QAAQ,EAAE,OAAO;AAErB,cAAQ,MAAM,QAAQ,YAAY,EAAE,EAClC,QAAQ,WAAW,IAAI,EACvB,QAAQ,WAAW,GAAG,EACtB,QAAQ,uBAAuB,OAAO;AACxC,WAAK,KAAK,SAAS;AAAA,IACnB;AAAA,IACD,aAAa,GAAG;AACf,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,KAAK,OAAO,KAAK,MAAM,KAAK;AACjC,WAAK,KAAK,WAAW,KAAK,WAAW,KAAK,KAAK,IAAI,EAAE,CAAC;AACtD,WAAK,mBAAmB,KAAK,WAAW,KAAK,KAAK,IAAI;AAAA,IACtD;AAAA,IACD,iBAAiB,GAAG;AACnB,YAAM,qBAAqB,KAAK,WAAW,KAAK,KAAK,IAAI;AACzD,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,KAAK,WAAW,mBAAmB,KAAK;AAAA,IAC7C;AAAA,IACD,aAAa;AACZ,UAAI,CAAC,KAAK,KAAK,UAAU,CAAC,KAAK,KAAK,QAAQ,CAAC,KAAK,KAAK,UAAU;AAChEA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAGA,UAAI,QAAQA,cAAG,MAAC,eAAe,OAAO,KAAK,CAAA;AAG3C,YAAM,KAAK;AAAA,QACV,MAAM,IAAI,KAAK,KAAK,KAAK,IAAI,EAAE,QAAS;AAAA,QACxC,QAAQ,WAAW,KAAK,KAAK,MAAM;AAAA,QACnC,MAAM,KAAK,KAAK;AAAA,QAChB,UAAU,KAAK,KAAK;AAAA,QACpB,QAAQ,KAAK,KAAK;AAAA,MACnB,CAAC;AAGDA,oBAAAA,MAAI,eAAe,SAAS,KAAK;AAGjC,WAAK,OAAO;AAAA,QACX,OAAM,oBAAI,QAAO,YAAa,EAAC,MAAM,GAAG,EAAE;AAAA,QAC1C,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,UAAU;AAAA,QACV,QAAQ;AAAA;AAGTA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACP,CAAC;AAIDA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA,EACD;;;;;;;;;;;;;;;;;;;;;AClIF,GAAG,WAAW,eAAe;"}