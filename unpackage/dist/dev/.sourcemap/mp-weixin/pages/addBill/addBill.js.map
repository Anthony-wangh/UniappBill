{"version":3,"file":"addBill.js","sources":["pages/addBill/addBill.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkQmlsbC9hZGRCaWxsLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"add-bill-container\">\n    <!-- 时间选择 -->\n    <view class=\"form-group\">\n      <label for=\"date\">时间</label>\n      <picker mode=\"date\" :value=\"bill.date\" @change=\"onDateChange\">\n        <text>{{ bill.date || '请选择日期' }}</text>\n      </picker>\n    </view>\n\n    <!-- 金额输入 -->\n    <view class=\"form-group\">\n      <label for=\"amount\">金额</label>\n      <input \n        type=\"number\" \n        v-model=\"bill.amount\" \n        placeholder=\"请输入金额\"\n        @input=\"validateAmount\"\n      />\n    </view>\n\n    <!-- 账单类型选择 -->\n    <view class=\"form-group\">\n      <label for=\"type\">账单类型</label>\n      <picker mode=\"selector\" :range=\"types\" @change=\"onTypeChange\">\n        <text>{{ bill.type || '请选择类型' }}</text>\n      </picker>\n    </view>\n\n    <!-- 类目选择 -->\n    <view class=\"form-group\">\n      <label for=\"category\">类目</label>\n      <picker mode=\"selector\" :range=\"selectCategories\" @change=\"onCategoryChange\">\n        <text>{{ bill.category || '请选择类目' }}</text>\n      </picker>\n    </view>\n\n    <!-- 备注输入 -->\n    <view class=\"form-group\">\n      <label for=\"remark\">备注</label>\n      <input \n        type=\"text\" \n        v-model=\"bill.remark\" \n        placeholder=\"请输入备注（非必填）\"\n      />\n    </view>\n\n    <!-- 添加按钮 -->\n    <button class=\"submit-btn\" @click=\"submitBill\">添加</button>\n  </view>\n</template>\r\n\r\n<script>\nexport default {\n  data() {\n    return {\n      bill: {\n        date: new Date().toISOString().slice(0, 10), // 默认当前日期\n        amount: '',\n        type: '', // 支出或收入\n        category: '', // 具体类目\n        remark: ''\n      },\n      types: ['支出', '收入'],\r\n\t  \n      categories: {\n        支出: ['购物', '餐饮', '交通', '娱乐', '房屋'],\n        收入: ['工资', '奖金']\n      },\r\n\t  selectCategories:[]\n    };\n  },\n  methods: {\n    onDateChange(e) {\n      this.bill.date = e.detail.value;\n    },\n    validateAmount(e) {\n      const value = e.detail.value;\n      if (!/^\\d*\\.?\\d*$/.test(value)) {\n        this.bill.amount = value.replace(/[^0-9.]/g, '');\n      }\n    },\n    onTypeChange(e) {\n      const index = e.detail.value;\n      this.bill.type = this.types[index];\n      this.bill.category = this.categories[this.bill.type][0]; // 重置类目选择\r\n\t  this.selectCategories=this.categories[this.bill.type];\n    },\n    onCategoryChange(e) {\n      const selectedCategories = this.categories[this.bill.type];\n      const index = e.detail.value;\n      this.bill.category = selectedCategories[index];\n    },\n    submitBill() {\n      if (!this.bill.amount || !this.bill.type || !this.bill.category) {\n        uni.showToast({\n          title: '请填写完整信息',\n          icon: 'none'\n        });\n        return;\n      }\n\n      // 获取本地存储中的账单数据\n      let bills = uni.getStorageSync('bills') || [];\n      \n      // 新增账单\n      bills.push({\n        time: new Date(this.bill.date).getTime(),\n        amount: parseFloat(this.bill.amount),\n        type: this.bill.type,\n        category: this.bill.category,\n        remark: this.bill.remark\n      });\n\n      // 更新本地存储\n      uni.setStorageSync('bills', bills);\n\n      // 清空表单\n      this.bill = {\n        date: new Date().toISOString().slice(0, 10),\n        amount: '',\n        type: '',\n        category: '',\n        remark: ''\n      };\n\n      uni.showToast({\n        title: '账单添加成功',\n        icon: 'success'\n      });\n\n      // 返回账单列表页面\n      this.$emit('navigateTo', 'bills');\n    }\n  }\n};\n</script>\r\n\r\n<style lang=\"scss\">\n.add-bill-container {\n  padding: 20px;\n  background-color: #f5f5f5;\n  height: calc(100vh - 60px); /* 减去底部导航栏的高度 */\n  box-sizing: border-box;\n\n  .form-group {\n    margin-bottom: 20px;\n\n    label {\n      display: block;\n      font-size: 14px;\n      color: #666;\n      margin-bottom: 5px;\n    }\n\n    picker, input {\n      width: 100%;\n      padding: 10px;\n      border: 1px solid #e0e0e0;\n      border-radius: 5px;\n      background-color: #ffffff;\n      font-size: 14px;\n      color: #333;\n    }\n\n    picker {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      cursor: pointer;\n    }\n\n    input {\n      &::placeholder {\n        color: #999;\n      }\n    }\n  }\n\n  .submit-btn {\n    width: 100%;\n    padding: 15px;\n    background-color: #2ecc71;\n    color: #fff;\n    font-size: 16px;\n    text-align: center;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n\n    &:active {\n      background-color: #27ae60;\n    }\n  }\n}\n</style>","import MiniProgramPage from 'E:/HBuilderProjects/BillRecord/pages/addBill/addBill.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAqDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,OAAM,oBAAI,QAAO,YAAa,EAAC,MAAM,GAAG,EAAE;AAAA;AAAA,QAC1C,QAAQ;AAAA,QACR,MAAM;AAAA;AAAA,QACN,UAAU;AAAA;AAAA,QACV,QAAQ;AAAA,MACT;AAAA,MACD,OAAO,CAAC,MAAM,IAAI;AAAA,MAElB,YAAY;AAAA,QACV,IAAI,CAAC,MAAM,MAAM,MAAM,MAAM,IAAI;AAAA,QACjC,IAAI,CAAC,MAAM,IAAI;AAAA,MAChB;AAAA,MACJ,kBAAiB,CAAC;AAAA;EAElB;AAAA,EACD,SAAS;AAAA,IACP,aAAa,GAAG;AACd,WAAK,KAAK,OAAO,EAAE,OAAO;AAAA,IAC3B;AAAA,IACD,eAAe,GAAG;AAChB,YAAM,QAAQ,EAAE,OAAO;AACvB,UAAI,CAAC,cAAc,KAAK,KAAK,GAAG;AAC9B,aAAK,KAAK,SAAS,MAAM,QAAQ,YAAY,EAAE;AAAA,MACjD;AAAA,IACD;AAAA,IACD,aAAa,GAAG;AACd,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,KAAK,OAAO,KAAK,MAAM,KAAK;AACjC,WAAK,KAAK,WAAW,KAAK,WAAW,KAAK,KAAK,IAAI,EAAE,CAAC;AACzD,WAAK,mBAAiB,KAAK,WAAW,KAAK,KAAK,IAAI;AAAA,IAClD;AAAA,IACD,iBAAiB,GAAG;AAClB,YAAM,qBAAqB,KAAK,WAAW,KAAK,KAAK,IAAI;AACzD,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,KAAK,WAAW,mBAAmB,KAAK;AAAA,IAC9C;AAAA,IACD,aAAa;AACX,UAAI,CAAC,KAAK,KAAK,UAAU,CAAC,KAAK,KAAK,QAAQ,CAAC,KAAK,KAAK,UAAU;AAC/DA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD;AAAA,MACF;AAGA,UAAI,QAAQA,cAAG,MAAC,eAAe,OAAO,KAAK,CAAA;AAG3C,YAAM,KAAK;AAAA,QACT,MAAM,IAAI,KAAK,KAAK,KAAK,IAAI,EAAE,QAAS;AAAA,QACxC,QAAQ,WAAW,KAAK,KAAK,MAAM;AAAA,QACnC,MAAM,KAAK,KAAK;AAAA,QAChB,UAAU,KAAK,KAAK;AAAA,QACpB,QAAQ,KAAK,KAAK;AAAA,MACpB,CAAC;AAGDA,oBAAAA,MAAI,eAAe,SAAS,KAAK;AAGjC,WAAK,OAAO;AAAA,QACV,OAAM,oBAAI,QAAO,YAAa,EAAC,MAAM,GAAG,EAAE;AAAA,QAC1C,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,UAAU;AAAA,QACV,QAAQ;AAAA;AAGVA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAC;AAGD,WAAK,MAAM,cAAc,OAAO;AAAA,IAClC;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;ACtIA,GAAG,WAAW,eAAe;"}