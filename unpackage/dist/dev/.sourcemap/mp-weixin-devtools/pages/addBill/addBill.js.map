{"version":3,"names":["_sfc_main","data","bill","date","Date","toISOString","slice","amount","type","category","remark","types","categories","支出","收入","methods","onDateChange","e","detail","value","validateAmount","test","replace","onTypeChange","index","onCategoryChange","selectedCategories","submitBill","common_vendor","showToast","title","icon","bills","getStorageSync","push","time","getTime","parseFloat","setStorageSync","$emit","wx","createPage","MiniProgramPage"],"sources":["addBill.vue","D:/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkQmlsbC9hZGRCaWxsLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"add-bill-container\">\n    <!-- 时间选择 -->\n    <view class=\"form-group\">\n      <label for=\"date\">时间</label>\n      <picker mode=\"date\" :value=\"bill.date\" @change=\"onDateChange\">\n        <text>{{ bill.date || '请选择日期' }}</text>\n      </picker>\n    </view>\n\n    <!-- 金额输入 -->\n    <view class=\"form-group\">\n      <label for=\"amount\">金额</label>\n      <input \n        type=\"number\" \n        v-model=\"bill.amount\" \n        placeholder=\"请输入金额\"\n        @input=\"validateAmount\"\n      />\n    </view>\n\n    <!-- 账单类型选择 -->\n    <view class=\"form-group\">\n      <label for=\"type\">账单类型</label>\n      <picker mode=\"selector\" :range=\"types\" @change=\"onTypeChange\">\n        <text>{{ bill.type || '请选择类型' }}</text>\n      </picker>\n    </view>\n\n    <!-- 类目选择 -->\n    <view class=\"form-group\">\n      <label for=\"category\">类目</label>\n      <picker mode=\"selector\" :range=\"categories\" @change=\"onCategoryChange\">\n        <text>{{ bill.category || '请选择类目' }}</text>\n      </picker>\n    </view>\n\n    <!-- 备注输入 -->\n    <view class=\"form-group\">\n      <label for=\"remark\">备注</label>\n      <input \n        type=\"text\" \n        v-model=\"bill.remark\" \n        placeholder=\"请输入备注（非必填）\"\n      />\n    </view>\n\n    <!-- 添加按钮 -->\n    <button class=\"submit-btn\" @click=\"submitBill\">添加</button>\n  </view>\n</template>\r\n\r\n<script>\nexport default {\n  data() {\n    return {\n      bill: {\n        date: new Date().toISOString().slice(0, 10), // 默认当前日期\n        amount: '',\n        type: '', // 支出或收入\n        category: '', // 具体类目\n        remark: ''\n      },\n      types: ['支出', '收入'],\r\n\t  \n      categories: {\n        支出: ['购物', '餐饮', '交通', '娱乐', '房屋'],\n        收入: ['工资', '奖金']\n      }\n    };\n  },\n  methods: {\n    onDateChange(e) {\n      this.bill.date = e.detail.value;\n    },\n    validateAmount(e) {\n      const value = e.detail.value;\n      if (!/^\\d*\\.?\\d*$/.test(value)) {\n        this.bill.amount = value.replace(/[^0-9.]/g, '');\n      }\n    },\n    onTypeChange(e) {\n      const index = e.detail.value;\n      this.bill.type = this.types[index];\n      this.bill.category = this.categories[index][0]; // 重置类目选择\n    },\n    onCategoryChange(e) {\n      const selectedCategories = this.categories[this.bill.type];\n      const index = e.detail.value;\n      this.bill.category = selectedCategories[index];\n    },\n    submitBill() {\n      if (!this.bill.amount || !this.bill.type || !this.bill.category) {\n        uni.showToast({\n          title: '请填写完整信息',\n          icon: 'none'\n        });\n        return;\n      }\n\n      // 获取本地存储中的账单数据\n      let bills = uni.getStorageSync('bills') || [];\n      \n      // 新增账单\n      bills.push({\n        time: new Date(this.bill.date).getTime(),\n        amount: parseFloat(this.bill.amount),\n        type: this.bill.type,\n        category: this.bill.category,\n        remark: this.bill.remark\n      });\n\n      // 更新本地存储\n      uni.setStorageSync('bills', bills);\n\n      // 清空表单\n      this.bill = {\n        date: new Date().toISOString().slice(0, 10),\n        amount: '',\n        type: '',\n        category: '',\n        remark: ''\n      };\n\n      uni.showToast({\n        title: '账单添加成功',\n        icon: 'success'\n      });\n\n      // 返回账单列表页面\n      this.$emit('navigateTo', 'bills');\n    }\n  }\n};\n</script>\r\n\r\n<style lang=\"scss\">\n.add-bill-container {\n  padding: 20px;\n  background-color: #f5f5f5;\n  height: calc(100vh - 60px); /* 减去底部导航栏的高度 */\n  box-sizing: border-box;\n\n  .form-group {\n    margin-bottom: 20px;\n\n    label {\n      display: block;\n      font-size: 14px;\n      color: #666;\n      margin-bottom: 5px;\n    }\n\n    picker, input {\n      width: 100%;\n      padding: 10px;\n      border: 1px solid #e0e0e0;\n      border-radius: 5px;\n      background-color: #ffffff;\n      font-size: 14px;\n      color: #333;\n    }\n\n    picker {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      cursor: pointer;\n    }\n\n    input {\n      &::placeholder {\n        color: #999;\n      }\n    }\n  }\n\n  .submit-btn {\n    width: 100%;\n    padding: 15px;\n    background-color: #2ecc71;\n    color: #fff;\n    font-size: 16px;\n    text-align: center;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n\n    &:active {\n      background-color: #27ae60;\n    }\n  }\n}\n</style>","import MiniProgramPage from 'E:/HBuilderProjects/BillRecord/pages/addBill/addBill.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}